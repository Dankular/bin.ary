/* ── Reset & base ───────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0d0f14;
  --surface:  #12151e;
  --surface2: #1a1e2b;
  --border:   #232840;
  --border2:  #2e3454;
  --text:     #d4daf0;
  --muted:    #5a6285;
  --accent:   #00e5a0;
  --accent2:  #0088ff;
  --warn:     #ffaa00;
  --error:    #ff4455;
  --yellow:   #c4aa6e;
  --mono: 'Cascadia Code','Fira Code','JetBrains Mono','Consolas',monospace;
}

html, body { height: 100%; background: var(--bg); color: var(--text); font-family: var(--mono); font-size: 14px; line-height: 1.5; }

/* ── Header ─────────────────────────────────────────────────────── */
header { text-align:center; padding:2rem 1rem 1rem; border-bottom:1px solid var(--border); }
.logo { font-size:2.2rem; font-weight:700; letter-spacing:-1px; }
.logo-bin { color:var(--accent); }
.logo-dot { color:var(--muted); }
.logo-ary { color:var(--accent2); }
.tagline  { color:var(--muted); font-size:.75rem; margin-top:.2rem; letter-spacing:2px; text-transform:uppercase; }

/* ── Upload ─────────────────────────────────────────────────────── */
#upload-panel { display:flex; flex-direction:column; align-items:center; padding:4rem 1rem; }
.drop-zone {
  width:100%; max-width:520px; border:2px dashed var(--border2); border-radius:12px;
  padding:3rem 2rem; text-align:center; cursor:pointer;
  transition:border-color .2s,background .2s; position:relative; outline:none;
}
.drop-zone:hover,.drop-zone:focus,.drop-zone.drag-over { border-color:var(--accent); background:rgba(0,229,160,.04); }
.drop-zone input[type="file"] { position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%; }
.drop-icon { font-size:2.2rem; margin-bottom:.8rem; color:var(--accent); }
.drop-text { font-size:1rem; margin-bottom:.3rem; }
.drop-sub  { font-size:.78rem; color:var(--muted); }
.upload-error { margin-top:1rem; color:var(--error); background:rgba(255,68,85,.08); border:1px solid rgba(255,68,85,.3); border-radius:6px; padding:.5rem 1rem; max-width:520px; width:100%; font-size:.82rem; }

/* ── Analysis panel ─────────────────────────────────────────────── */
#analysis-panel { padding:1.5rem 1.25rem; max-width:1400px; margin:0 auto; }
.panel-title { font-size:.65rem; text-transform:uppercase; letter-spacing:3px; color:var(--muted); margin-bottom:1.2rem; }

/* ── Pipeline ───────────────────────────────────────────────────── */
.pipeline-wrapper { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:1.25rem 1.5rem; margin-bottom:1.5rem; }
.pipeline { display:flex; align-items:flex-start; gap:0; overflow-x:auto; padding-bottom:.25rem; }
.stage { display:flex; flex-direction:column; align-items:center; min-width:100px; position:relative; }
.stage:not(:last-child)::after { content:''; position:absolute; top:21px; left:calc(50% + 22px); width:calc(100% - 44px); height:2px; background:var(--border2); transition:background .3s; z-index:0; }
.stage.done:not(:last-child)::after { background:var(--accent); }
.stage.error:not(:last-child)::after { background:var(--error); }
.stage-node { width:42px;height:42px;border-radius:50%;border:2px solid var(--border2);background:var(--surface2);display:flex;align-items:center;justify-content:center;font-size:1rem;position:relative;z-index:1;transition:border-color .3s,background .3s,box-shadow .3s; }
.stage.pending .stage-node { border-color:var(--border2);color:var(--muted); }
.stage.running .stage-node { border-color:var(--warn);color:var(--warn);animation:pulse-node 1.2s ease-in-out infinite; }
.stage.done    .stage-node { border-color:var(--accent);background:rgba(0,229,160,.1);color:var(--accent);box-shadow:0 0 8px rgba(0,229,160,.2); }
.stage.error   .stage-node { border-color:var(--error);background:rgba(255,68,85,.1);color:var(--error); }
@keyframes pulse-node { 0%,100%{box-shadow:0 0 6px rgba(255,170,0,.2)} 50%{box-shadow:0 0 18px rgba(255,170,0,.5)} }
.stage-label { margin-top:.4rem;font-size:.7rem;text-align:center;color:var(--muted);line-height:1.3; }
.stage.running .stage-label { color:var(--warn); }
.stage.done    .stage-label { color:var(--text); }
.stage.error   .stage-label { color:var(--error); }
.stage-result  { font-size:.62rem;color:var(--accent);text-align:center;margin-top:.15rem;max-width:96px;word-break:break-word;min-height:1em; }
.stage.error .stage-result { color:var(--error); }
.spinner { display:inline-block;width:16px;height:16px;border:2px solid rgba(255,170,0,.2);border-top-color:var(--warn);border-radius:50%;animation:spin .7s linear infinite; }
@keyframes spin { to{transform:rotate(360deg)} }

/* ── Cards / grid ───────────────────────────────────────────────── */
.results-grid { display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem; }
@media(max-width:720px){.results-grid{grid-template-columns:1fr;}}
.card { background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:1.1rem; }
.card-title { font-size:.62rem;text-transform:uppercase;letter-spacing:2.5px;color:var(--muted);margin-bottom:.8rem; }
.info-table { width:100%;border-collapse:collapse; }
.info-table tr:not(:last-child) td { border-bottom:1px solid var(--border); }
.info-table td { padding:.4rem 0;font-size:.8rem; }
.info-table td:first-child { color:var(--muted);width:44%;padding-right:.4rem; }
.info-table td:last-child  { color:var(--text);word-break:break-all; }
.table-scroll { overflow-x:auto; }
.data-table { width:100%;border-collapse:collapse;font-size:.78rem; }
.data-table th { text-align:left;color:var(--muted);font-weight:400;font-size:.65rem;text-transform:uppercase;letter-spacing:1.5px;padding:0 .5rem .5rem;border-bottom:1px solid var(--border); }
.data-table td { padding:.35rem .5rem;border-bottom:1px solid var(--border);white-space:nowrap; }
.data-table tr:last-child td { border-bottom:none; }
.data-table tr:hover td { background:var(--surface2); }
.section-code { color:var(--accent); }
.section-data { color:var(--accent2); }
.badge-code  { font-size:.58rem;background:rgba(0,229,160,.1);color:var(--accent);border:1px solid rgba(0,229,160,.3);border-radius:3px;padding:1px 4px;margin-left:4px; }

/* Signatures */
.sig-card { margin-bottom:1rem; }

/* ── View tabs ──────────────────────────────────────────────────── */
.view-card { margin-bottom:1rem; padding:0; overflow:hidden; }
.view-tabs { display:flex;border-bottom:1px solid var(--border);background:var(--surface2);padding:.25rem .75rem 0; }
.tab { background:none;border:none;border-bottom:2px solid transparent;color:var(--muted);font-family:var(--mono);font-size:.78rem;padding:.5rem .9rem;cursor:pointer;transition:color .2s,border-color .2s; }
.tab:hover { color:var(--text); }
.tab.active { color:var(--accent);border-bottom-color:var(--accent); }
.tab-pane { padding:1rem; }
.tab-pane.active { display:block; }
.tab-pane[hidden] { display:none!important; }

/* ── Disassembly ────────────────────────────────────────────────── */
.disasm-header { display:flex;align-items:center;gap:.6rem;margin-bottom:.6rem;flex-wrap:wrap; }
.badge { font-size:.62rem;padding:2px 8px;border-radius:10px;border:1px solid; }
.badge.badge-asm { color:var(--accent); border-color:rgba(0,229,160,.4); background:rgba(0,229,160,.08); }
.badge.badge-hex { color:var(--warn);   border-color:rgba(255,170,0,.4); background:rgba(255,170,0,.08); }
.disasm-section { color:var(--muted);font-size:.72rem;flex:1; }
.disasm-filter { background:var(--surface2);border:1px solid var(--border2);border-radius:6px;color:var(--text);font-family:var(--mono);font-size:.76rem;padding:.28rem .65rem;outline:none;width:200px;transition:border-color .2s; }
.disasm-filter:focus { border-color:var(--accent2); }
.disasm-filter::placeholder { color:var(--muted); }
.btn-icon { background:none;border:1px solid var(--border2);border-radius:5px;color:var(--muted);font-family:var(--mono);font-size:.72rem;padding:.25rem .65rem;cursor:pointer;transition:color .2s,border-color .2s;white-space:nowrap; }
.btn-icon:hover { color:var(--accent);border-color:var(--accent); }
.btn-sm { background:var(--surface2);border:1px solid var(--border2);border-radius:5px;color:var(--muted);font-family:var(--mono);font-size:.72rem;padding:.3rem .8rem;cursor:pointer;transition:color .2s,border-color .2s; }
.btn-sm:hover { color:var(--text); }
.btn-sm.btn-primary { border-color:var(--accent);color:var(--accent); }

.disasm-scroll { overflow:auto;max-height:480px;border-radius:6px;border:1px solid var(--border);background:#090b0f; }
.disasm-table { width:100%;border-collapse:collapse;font-size:.78rem; }
.disasm-table thead { position:sticky;top:0;z-index:2;background:var(--surface2); }
.disasm-table th { text-align:left;color:var(--muted);font-weight:400;font-size:.62rem;text-transform:uppercase;letter-spacing:1.5px;padding:.4rem .6rem;border-bottom:1px solid var(--border); }
.disasm-table td { padding:.24rem .6rem;border-bottom:1px solid rgba(35,40,64,.4);white-space:nowrap; }
.disasm-table tr:hover td { background:rgba(255,255,255,.025); }
.disasm-table tr.selected td { background:rgba(0,229,160,.07) !important; }
.disasm-table tr.dbg-current td { background:rgba(255,170,0,.1) !important; }
.disasm-table tr.has-bp td:first-child::before { content:'●'; color:var(--error); margin-right:4px; }

.col-label { width:6rem;min-width:5rem; }
.col-addr  { min-width:130px; }
.col-bytes { min-width:160px; }
.col-mnem  { min-width:90px; }
.col-ops   { min-width:180px; }
.col-xref  { min-width:60px; }

.cell-label { color:var(--accent2);font-size:.68rem; }
.cell-addr  { color:#4d5a80; }
.cell-bytes { color:#38455e;letter-spacing:.5px; }
.cell-mnem  { color:var(--accent);font-weight:500; }
.cell-ops   { color:var(--yellow); }
.cell-xref  { color:var(--muted);font-size:.65rem;cursor:pointer; }
.cell-xref:hover { color:var(--accent2); }

/* identifier highlight */
.disasm-table tr.id-highlight td.cell-mnem,
.disasm-table tr.id-highlight td.cell-ops,
.disasm-table tr.id-highlight td.cell-addr { background:rgba(255,200,0,.12); }

/* clickable address in operands */
.op-addr { cursor:pointer;text-decoration:underline;text-decoration-style:dotted;color:var(--accent2); }
.op-addr:hover { color:var(--accent); }

/* filter hide */
.disasm-table tr.filtered { display:none; }

/* func label row */
.disasm-table tr.func-label td { color:var(--accent2);font-size:.7rem;padding:.15rem .6rem;border-bottom:none;background:rgba(0,136,255,.04); }

/* ── XREF panel ─────────────────────────────────────────────────── */
.xref-panel { margin-bottom:1rem; }
.xref-header { display:flex;align-items:center;gap:.5rem;margin-bottom:.6rem; }
.xref-addr { color:var(--accent);font-size:.78rem;flex:1; }
.xref-body { max-height:200px;overflow-y:auto; }
.xref-entry { display:flex;gap:.75rem;padding:.3rem 0;border-bottom:1px solid var(--border);font-size:.78rem; }
.xref-type  { color:var(--muted);font-size:.65rem;width:36px;text-align:right;padding-top:.1rem; }
.xref-from  { color:var(--accent2);cursor:pointer; }
.xref-from:hover { color:var(--accent); }
.xref-to    { color:var(--yellow); }
.xref-empty { color:var(--muted);font-size:.8rem;font-style:italic; }

/* ── Graph ──────────────────────────────────────────────────────── */
.graph-pane { padding:.75rem; }
.graph-container { min-height:340px;overflow:auto;border:1px solid var(--border);border-radius:6px;background:#090b0f;cursor:grab;position:relative; }
.graph-container:active { cursor:grabbing; }
.graph-addr-bar { display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem;flex-wrap:wrap; }
.addr-input { background:var(--surface2);border:1px solid var(--border2);border-radius:5px;color:var(--text);font-family:var(--mono);font-size:.76rem;padding:.28rem .65rem;outline:none;width:240px; }
.addr-input:focus { border-color:var(--accent2); }
.graph-empty { color:var(--muted);padding:2rem;text-align:center;font-size:.85rem; }
.cfg-svg, .xref-svg, .prox-svg { font-family:var(--mono); user-select:none; }
.cfg-block { cursor:pointer; }
.cfg-block:hover { stroke:var(--accent) !important; }

/* ── Debugger ────────────────────────────────────────────────────── */
.debugger-card { margin-bottom:1rem; }
.debugger-header { display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;cursor:pointer; }
.dbg-rip  { color:var(--accent);font-size:.78rem;margin-left:.75rem; }
.dbg-controls { display:flex;gap:.4rem;flex-wrap:wrap; }
.btn-dbg { background:var(--surface2);border:1px solid var(--border2);border-radius:5px;color:var(--muted);font-family:var(--mono);font-size:.72rem;padding:.28rem .7rem;cursor:pointer;transition:color .2s,border-color .2s; }
.btn-dbg:hover { color:var(--text);border-color:var(--accent2); }
.debugger-body { margin-top:.75rem; }
.dbg-regs { display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:.2rem .75rem;font-size:.76rem;margin-bottom:.5rem; }
.dbg-reg { display:flex;gap:.4rem;align-items:baseline; }
.dbg-reg-name { color:var(--muted);min-width:3rem;text-transform:uppercase; }
.dbg-reg-val  { color:var(--accent);font-size:.72rem; }
.dbg-reg-val.changed { color:var(--warn);font-weight:700; }
.dbg-flags { display:flex;gap:.6rem;font-size:.72rem;margin-bottom:.5rem;color:var(--muted); }
.dbg-flag.set { color:var(--accent);font-weight:700; }
.dbg-stack { margin-top:.4rem; }
.dbg-stack-label { font-size:.62rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted);margin-bottom:.3rem; }
.dbg-stack-rows { font-size:.72rem;max-height:120px;overflow-y:auto; }
.dbg-stack-row { display:flex;gap:.75rem;padding:.15rem 0; }
.dbg-stack-addr { color:#4d5a80;min-width:140px; }
.dbg-stack-hex  { color:#38455e;letter-spacing:.4px; }
.dbg-stack-asc  { color:var(--muted); }

/* ── Modals ─────────────────────────────────────────────────────── */
.modal { position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:100; }
.modal[hidden] { display:none!important; }
.modal-box { background:var(--surface);border:1px solid var(--border2);border-radius:10px;padding:1.25rem;min-width:300px;max-width:420px; }
.modal-title { font-size:.85rem;margin-bottom:.6rem;color:var(--text); }
.modal-sub   { font-size:.75rem;color:var(--muted);margin-bottom:.5rem; }
.modal-input { width:100%;background:var(--surface2);border:1px solid var(--border2);border-radius:6px;color:var(--text);font-family:var(--mono);font-size:.82rem;padding:.4rem .7rem;outline:none;margin-bottom:.75rem; }
.modal-input:focus { border-color:var(--accent2); }
.modal-actions { display:flex;gap:.5rem;justify-content:flex-end; }

/* ── New analysis btn ───────────────────────────────────────────── */
.btn-new { display:block;margin:0 auto 2.5rem;background:transparent;border:1px solid var(--border2);color:var(--muted);font-family:var(--mono);font-size:.78rem;padding:.5rem 1.4rem;border-radius:6px;cursor:pointer;transition:border-color .2s,color .2s; }
.btn-new:hover { border-color:var(--accent);color:var(--accent); }

/* ── Scrollbars ─────────────────────────────────────────────────── */
::-webkit-scrollbar { width:5px;height:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border2);border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:var(--muted); }

[hidden] { display:none !important; }
